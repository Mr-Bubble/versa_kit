import{c as ee,t as $,n as K,m as O,d as te,r as L,a as N,u as me,b as _,w as B,e as ge,f as _e,g as pe,o as ae,h as we,i as ye,j as be,k as xe,l as Se,p as m,q as J,s as se,v as A,x as Te,y as F,z as Y,A as Ce,_ as ze,B as V,C as Q,D as S,E as T,F as Ie,G as ke,H as Pe,I as Be,J as Ee,K as $e,L as Ae}from"./index-daf1a514.js";import{g as De,C as Me,R as Re}from"./index-56648ada.js";import{u as Oe,a as ne,s as Fe,b as Ve,c as Le,d as Z,F as Ne,e as Ye,C as He,B as Ue}from"./index-dee82aaf.js";const[ie,D]=ee("swipe"),Xe={loop:$,width:K,height:K,vertical:Boolean,autoplay:O(0),duration:O(500),touchable:$,lazyRender:Boolean,initialSwipe:O(0),indicatorColor:String,showIndicators:$,stopPropagation:$},oe=Symbol(ie);var qe=te({name:ie,props:Xe,emits:["change","dragStart","dragEnd"],setup(t,{emit:p,slots:g}){const u=L(),v=L(),e=N({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let w=!1;const l=Oe(),{children:f,linkChildren:n}=me(oe),s=_(()=>f.length),c=_(()=>e[t.vertical?"height":"width"]),r=_(()=>t.vertical?l.deltaY.value:l.deltaX.value),y=_(()=>e.rect?(t.vertical?e.rect.height:e.rect.width)-c.value*s.value:0),b=_(()=>c.value?Math.ceil(Math.abs(y.value)/c.value):s.value),M=_(()=>s.value*c.value),C=_(()=>(e.active+s.value)%s.value),H=_(()=>{const a=t.vertical?"vertical":"horizontal";return l.direction.value===a}),le=_(()=>{const a={transitionDuration:`${e.swiping?0:t.duration}ms`,transform:`translate${t.vertical?"Y":"X"}(${+e.offset.toFixed(2)}px)`};if(c.value){const o=t.vertical?"height":"width",i=t.vertical?"width":"height";a[o]=`${M.value}px`,a[i]=t[i]?`${t[i]}px`:""}return a}),ce=a=>{const{active:o}=e;return a?t.loop?F(o+a,-1,s.value):F(o+a,0,b.value):o},U=(a,o=0)=>{let i=a*c.value;t.loop||(i=Math.min(i,-y.value));let h=o-i;return t.loop||(h=F(h,y.value,0)),h},x=({pace:a=0,offset:o=0,emitChange:i})=>{if(s.value<=1)return;const{active:h}=e,d=ce(a),P=U(d,o);if(t.loop){if(f[0]&&P!==y.value){const R=P<y.value;f[0].setOffset(R?M.value:0)}if(f[s.value-1]&&P!==0){const R=P>0;f[s.value-1].setOffset(R?-M.value:0)}}e.active=d,e.offset=P,i&&d!==h&&p("change",C.value)},E=()=>{e.swiping=!0,e.active<=-1?x({pace:s.value}):e.active>=s.value&&x({pace:-s.value})},ue=()=>{E(),l.reset(),A(()=>{e.swiping=!1,x({pace:-1,emitChange:!0})})},X=()=>{E(),l.reset(),A(()=>{e.swiping=!1,x({pace:1,emitChange:!0})})};let q;const I=()=>clearTimeout(q),k=()=>{I(),+t.autoplay>0&&s.value>1&&(q=setTimeout(()=>{X(),k()},+t.autoplay))},z=(a=+t.initialSwipe)=>{if(!u.value)return;const o=()=>{var i,h;if(!J(u)){const d={width:u.value.offsetWidth,height:u.value.offsetHeight};e.rect=d,e.width=+((i=t.width)!=null?i:d.width),e.height=+((h=t.height)!=null?h:d.height)}s.value&&(a=Math.min(s.value-1,a),a===-1&&(a=s.value-1)),e.active=a,e.swiping=!0,e.offset=U(a),f.forEach(d=>{d.setOffset(0)}),k()};J(u)?se().then(o):o()},W=()=>z(e.active);let j;const re=a=>{!t.touchable||a.touches.length>1||(l.start(a),w=!1,j=Date.now(),I(),E())},ve=a=>{t.touchable&&e.swiping&&(l.move(a),H.value&&(!t.loop&&(e.active===0&&r.value>0||e.active===s.value-1&&r.value<0)||(Te(a,t.stopPropagation),x({offset:r.value}),w||(p("dragStart",{index:C.value}),w=!0))))},G=()=>{if(!t.touchable||!e.swiping)return;const a=Date.now()-j,o=r.value/a;if((Math.abs(o)>.25||Math.abs(r.value)>c.value/2)&&H.value){const h=t.vertical?l.offsetY.value:l.offsetX.value;let d=0;t.loop?d=h>0?r.value>0?-1:1:0:d=-Math[r.value>0?"ceil":"floor"](r.value/c.value),x({pace:d,emitChange:!0})}else r.value&&x({pace:0});w=!1,e.swiping=!1,p("dragEnd",{index:C.value}),k()},de=(a,o={})=>{E(),l.reset(),A(()=>{let i;t.loop&&a===s.value?i=e.active===0?0:a:i=a%s.value,o.immediate?A(()=>{e.swiping=!1}):e.swiping=!1,x({pace:i-e.active,emitChange:!0})})},fe=(a,o)=>{const i=o===C.value,h=i?{backgroundColor:t.indicatorColor}:void 0;return m("i",{style:h,class:D("indicator",{active:i})},null)},he=()=>{if(g.indicator)return g.indicator({active:C.value,total:s.value});if(t.showIndicators&&s.value>1)return m("div",{class:D("indicators",{vertical:t.vertical})},[Array(s.value).fill("").map(fe)])};return ne({prev:ue,next:X,state:e,resize:W,swipeTo:de}),n({size:c,props:t,count:s,activeIndicator:C}),B(()=>t.initialSwipe,a=>z(+a)),B(s,()=>z(e.active)),B(()=>t.autoplay,k),B([ge,_e,()=>t.width,()=>t.height],W),B(pe(),a=>{a==="visible"?k():I()}),ae(z),we(()=>z(e.active)),ye(()=>z(e.active)),be(I),xe(I),Se("touchmove",ve,{target:v}),()=>{var a;return m("div",{ref:u,class:D()},[m("div",{ref:v,style:le.value,class:D("track",{vertical:t.vertical}),onTouchstartPassive:re,onTouchend:G,onTouchcancel:G},[(a=g.default)==null?void 0:a.call(g)]),he()])}}});const We=Y(qe),[je,Ge]=ee("swipe-item");var Ke=te({name:je,setup(t,{slots:p}){let g;const u=N({offset:0,inited:!1,mounted:!1}),{parent:v,index:e}=Ce(oe);if(!v)return;const w=_(()=>{const n={},{vertical:s}=v.props;return v.size.value&&(n[s?"height":"width"]=`${v.size.value}px`),u.offset&&(n.transform=`translate${s?"Y":"X"}(${u.offset}px)`),n}),l=_(()=>{const{loop:n,lazyRender:s}=v.props;if(!s||g)return!0;if(!u.mounted)return!1;const c=v.activeIndicator.value,r=v.count.value-1,y=c===0&&n?r:c-1,b=c===r&&n?0:c+1;return g=e.value===c||e.value===y||e.value===b,g}),f=n=>{u.offset=n};return ae(()=>{se(()=>{u.mounted=!0})}),ne({setOffset:f}),()=>{var n;return m("div",{class:Ge(),style:w.value},[l.value?(n=p.default)==null?void 0:n.call(p):null])}}});const Je=Y(Ke);Y(Fe);const Qe=t=>(Ee("data-v-1bec2a7d"),t=t(),$e(),t),Ze={class:"zh-body"},et={class:"zh-button"},tt=["src"],at=Qe(()=>T("div",{class:"zh_footer_tips"},[T("h4",{class:"app-font-danger"},"使用须知:"),T("p",null," ⭐️ 温馨提示: 粘贴图集地址时无需删除文案，但如果图集链接正确但解析失败请删掉文案后重试 "),T("p",null,"⭐️ 支持平台: 抖音、皮皮虾、皮皮搞笑、微博、最右、快手...")],-1)),st={__name:"index",setup(t){const p=N({url:""});let g=L({});const u=()=>{const{url:v}=p;let e="";const w=/https?:\/\/[^\s]+/,l=v.match(w);l&&l.length>0?e=l[0]:console.log("Invalid share URL");const f={url:e};Ve({message:"解析中...",forbidClick:!0}),De(f).then(n=>{Le(),n.code===200?(g.value=n.data,Z({type:"success",message:n.msg||"解析成功"})):Z({type:"danger",message:n.msg||"解析失败"})})};return(v,e)=>{const w=Ye,l=He,f=Ue,n=Me,s=Re,c=Ne,r=Je,y=We;return V(),Q("div",Ze,[m(c,{onSubmit:u},{default:S(()=>[m(l,{inset:""},{default:S(()=>[m(w,{modelValue:p.url,"onUpdate:modelValue":e[0]||(e[0]=b=>p.url=b),name:"url",label:"链接",rows:"3",autosize:"",type:"textarea",placeholder:"将分享的地址粘贴到这里就可以去水印了呀",required:"",rules:[{required:!0,message:"请输入需要去水印的地址链接或者文字内容"}]},null,8,["modelValue"])]),_:1}),T("div",et,[m(s,{justify:"center"},{default:S(()=>[m(n,{span:"8"},{default:S(()=>[m(f,{block:"",icon:"certificate",type:"primary",size:"small","native-type":"submit"},{default:S(()=>[Ie(" 去水印 ")]),_:1})]),_:1})]),_:1})])]),_:1}),T("div",null,[m(y,{"lazy-render":""},{default:S(()=>[(V(!0),Q(ke,null,Pe(Be(g),b=>(V(),Ae(r,{key:b},{default:S(()=>[T("img",{src:b},null,8,tt)]),_:2},1024))),128))]),_:1})]),at])}}},lt=ze(st,[["__scopeId","data-v-1bec2a7d"]]);export{lt as default};
