import{j as W,y as Z,z as se,m as w,s as R,k as j,A as ce,B as Le,a as s,I as O,C as N,w as U,t as J,v as Y,D as E,E as Me,G as ue,H as Ae,J as Re,K as _e,L as $e,M as ze,N as Oe,r as De,l as Q,O as Fe,P as _,x as ae,Q as qe,R as Ne,S as We,T as K,U as je,V as Ue,W as ie,X as Ge,Y as de,f as He,Z as Ke,F as Ye,$ as Je}from"./index-e81875e3.js";import{L as Qe,u as fe,a as Xe}from"./index-47ad99eb.js";import{u as Ze}from"./function-call-1c510043.js";const[pe,$]=W("button"),et=Z({},se,{tag:w("button"),text:String,icon:String,type:w("default"),size:w("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:w("button"),loadingSize:R,loadingText:String,loadingType:String,iconPosition:w("left")});var tt=j({name:pe,props:et,emits:["click"],setup(e,{emit:n,slots:i}){const d=ce(),l=()=>i.loading?i.loading():s(Qe,{size:e.loadingSize,type:e.loadingType,class:$("loading")},null),f=()=>{if(e.loading)return l();if(i.icon)return s("div",{class:$("icon")},[i.icon()]);if(e.icon)return s(O,{name:e.icon,class:$("icon"),classPrefix:e.iconPrefix},null)},L=()=>{let c;if(e.loading?c=e.loadingText:c=i.default?i.default():e.text,c)return s("span",{class:$("text")},[c])},P=()=>{const{color:c,plain:m}=e;if(c){const x={color:m?c:"white"};return m||(x.background=c),c.includes("gradient")?x.border=0:x.borderColor=c,x}},g=c=>{e.loading?N(c):e.disabled||(n("click",c),d())};return()=>{const{tag:c,type:m,size:x,block:V,round:M,plain:A,square:k,loading:a,disabled:u,hairline:b,nativeType:C,iconPosition:v}=e,D=[$([m,x,{plain:A,block:V,round:M,square:k,loading:a,disabled:u,hairline:b}]),{[Le]:b}];return s(c,{type:C,class:D,style:P(),disabled:u,onClick:g},{default:()=>[s("div",{class:$("content")},[v==="left"&&f(),L(),v==="right"&&f()])]})}}});const wt=U(tt),[nt,z]=W("cell"),ge={tag:w("div"),icon:String,size:String,title:R,value:R,label:R,center:Boolean,isLink:Boolean,border:J,iconPrefix:String,valueClass:Y,labelClass:Y,titleClass:Y,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},at=Z({},ge,se);var it=j({name:nt,props:at,setup(e,{slots:n}){const i=ce(),d=()=>{if(n.label||E(e.label))return s("div",{class:[z("label"),e.labelClass]},[n.label?n.label():e.label])},l=()=>{var g;if(n.title||E(e.title)){const c=(g=n.title)==null?void 0:g.call(n);return Array.isArray(c)&&c.length===0?void 0:s("div",{class:[z("title"),e.titleClass],style:e.titleStyle},[c||s("span",null,[e.title]),d()])}},f=()=>{const g=n.value||n.default;if(g||E(e.value))return s("div",{class:[z("value"),e.valueClass]},[g?g():s("span",null,[e.value])])},L=()=>{if(n.icon)return n.icon();if(e.icon)return s(O,{name:e.icon,class:z("left-icon"),classPrefix:e.iconPrefix},null)},P=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const g=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return s(O,{name:g,class:z("right-icon")},null)}};return()=>{var g;const{tag:c,size:m,center:x,border:V,isLink:M,required:A}=e,k=(g=e.clickable)!=null?g:M,a={center:x,required:!!A,clickable:k,borderless:!V};return m&&(a[m]=!!m),s(c,{class:z(a),role:k?"button":void 0,tabindex:k?0:void 0,onClick:i},{default:()=>{var u;return[L(),l(),f(),P(),(u=n.extra)==null?void 0:u.call(n)]}})}}});const lt=U(it),[rt,ot]=W("form"),st={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:R,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:J,showErrorMessage:J,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var ct=j({name:rt,props:st,emits:["submit","failed"],setup(e,{emit:n,slots:i}){const{children:d,linkChildren:l}=Me(ue),f=a=>a?d.filter(u=>a.includes(u.name)):d,L=a=>new Promise((u,b)=>{const C=[];f(a).reduce((D,F)=>D.then(()=>{if(!C.length)return F.validate().then(q=>{q&&C.push(q)})}),Promise.resolve()).then(()=>{C.length?b(C):u()})}),P=a=>new Promise((u,b)=>{const C=f(a);Promise.all(C.map(v=>v.validate())).then(v=>{v=v.filter(Boolean),v.length?b(v):u()})}),g=a=>{const u=d.find(b=>b.name===a);return u?new Promise((b,C)=>{u.validate().then(v=>{v?C(v):b()})}):Promise.reject()},c=a=>typeof a=="string"?g(a):e.validateFirst?L(a):P(a),m=a=>{typeof a=="string"&&(a=[a]),f(a).forEach(b=>{b.resetValidation()})},x=()=>d.reduce((a,u)=>(a[u.name]=u.getValidationStatus(),a),{}),V=(a,u)=>{d.some(b=>b.name===a?(b.$el.scrollIntoView(u),!0):!1)},M=()=>d.reduce((a,u)=>(u.name!==void 0&&(a[u.name]=u.formValue.value),a),{}),A=()=>{const a=M();c().then(()=>n("submit",a)).catch(u=>{n("failed",{values:a,errors:u}),e.scrollToError&&u[0].name&&V(u[0].name)})},k=a=>{N(a),A()};return l({props:e}),fe({submit:A,validate:c,getValues:M,scrollToField:V,resetValidation:m,getValidationStatus:x}),()=>{var a;return s("form",{class:ot(),onSubmit:k},[(a=i.default)==null?void 0:a.call(i)])}}});const Pt=U(ct);function me(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function ut(e,n){if(me(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function dt(e,n){return new Promise(i=>{const d=n.validator(e,n);if($e(d)){d.then(i);return}i(d)})}function le(e,n){const{message:i}=n;return ze(i)?i(e,n):i||""}function ft({target:e}){e.composing=!0}function re({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function gt(e,n){const i=Ae();e.style.height="auto";let d=e.scrollHeight;if(_e(n)){const{maxHeight:l,minHeight:f}=n;l!==void 0&&(d=Math.min(d,l)),f!==void 0&&(d=Math.max(d,f))}d&&(e.style.height=`${d}px`,Re(i))}function mt(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function T(e){return[...e].length}function X(e,n){return[...e].slice(0,n).join("")}const[ht,B]=W("field"),bt={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:R,formatter:Function,clearIcon:w("clear"),modelValue:Oe(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:w("focus"),formatTrigger:w("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},vt=Z({},ge,bt,{rows:R,type:w("text"),rules:Array,autosize:[Boolean,Object],labelWidth:R,labelClass:Y,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var yt=j({name:ht,props:vt,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:i}){const d=Ze(),l=De({status:"unvalidated",focused:!1,validateMessage:""}),f=Q(),L=Q(),P=Q(),{parent:g}=Fe(ue),c=()=>{var t;return String((t=e.modelValue)!=null?t:"")},m=t=>{if(E(e[t]))return e[t];if(g&&E(g.props[t]))return g.props[t]},x=_(()=>{const t=m("readonly");if(e.clearable&&!t){const r=c()!=="",o=e.clearTrigger==="always"||e.clearTrigger==="focus"&&l.focused;return r&&o}return!1}),V=_(()=>P.value&&i.input?P.value():e.modelValue),M=_(()=>{var t;const r=m("required");return r==="auto"?(t=e.rules)==null?void 0:t.some(o=>o.required):r}),A=t=>t.reduce((r,o)=>r.then(()=>{if(l.status==="failed")return;let{value:h}=V;if(o.formatter&&(h=o.formatter(h,o)),!ut(h,o)){l.status="failed",l.validateMessage=le(h,o);return}if(o.validator)return me(h)&&o.validateEmpty===!1?void 0:dt(h,o).then(y=>{y&&typeof y=="string"?(l.status="failed",l.validateMessage=y):y===!1&&(l.status="failed",l.validateMessage=le(h,o))})}),Promise.resolve()),k=()=>{l.status="unvalidated",l.validateMessage=""},a=()=>n("endValidate",{status:l.status,message:l.validateMessage}),u=(t=e.rules)=>new Promise(r=>{k(),t?(n("startValidate"),A(t).then(()=>{l.status==="failed"?(r({name:e.name,message:l.validateMessage}),a()):(l.status="passed",r(),a())})):r()}),b=t=>{if(g&&e.rules){const{validateTrigger:r}=g.props,o=ie(r).includes(t),h=e.rules.filter(y=>y.trigger?ie(y.trigger).includes(t):o);h.length&&u(h)}},C=t=>{var r;const{maxlength:o}=e;if(E(o)&&T(t)>+o){const h=c();if(h&&T(h)===+o)return h;const y=(r=f.value)==null?void 0:r.selectionEnd;if(l.focused&&y){const S=[...t],I=S.length-+o;return S.splice(y-I,I),S.join("")}return X(t,+o)}return t},v=(t,r="onChange")=>{const o=t;t=C(t);const h=T(o)-T(t);if(e.type==="number"||e.type==="digit"){const S=e.type==="number";t=Ge(t,S,S)}let y=0;if(e.formatter&&r===e.formatTrigger){const{formatter:S,maxlength:I}=e;if(t=S(t),E(I)&&T(t)>+I&&(t=X(t,+I)),f.value&&l.focused){const{selectionEnd:H}=f.value,ne=X(o,H);y=T(S(ne))-T(ne)}}if(f.value&&f.value.value!==t)if(l.focused){let{selectionStart:S,selectionEnd:I}=f.value;if(f.value.value=t,E(S)&&E(I)){const H=T(t);h?(S-=h,I-=h):y&&(S+=y,I+=y),f.value.setSelectionRange(Math.min(S,H),Math.min(I,H))}}else f.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},D=t=>{t.target.composing||v(t.target.value)},F=()=>{var t;return(t=f.value)==null?void 0:t.blur()},q=()=>{var t;return(t=f.value)==null?void 0:t.focus()},G=()=>{const t=f.value;e.type==="textarea"&&e.autosize&&t&&gt(t,e.autosize)},he=t=>{l.focused=!0,n("focus",t),K(G),m("readonly")&&F()},be=t=>{l.focused=!1,v(c(),"onBlur"),n("blur",t),!m("readonly")&&(b("onBlur"),K(G),Ke())},p=t=>n("clickInput",t),ve=t=>n("clickLeftIcon",t),ye=t=>n("clickRightIcon",t),Se=t=>{N(t),n("update:modelValue",""),n("clear",t)},ee=_(()=>{if(typeof e.error=="boolean")return e.error;if(g&&g.props.showError&&l.status==="failed")return!0}),xe=_(()=>{const t=m("labelWidth"),r=m("labelAlign");if(t&&r!=="top")return{width:ae(t)}}),ke=t=>{t.keyCode===13&&(!(g&&g.props.submitOnEnter)&&e.type!=="textarea"&&N(t),e.type==="search"&&F()),n("keypress",t)},te=()=>e.id||`${d}-input`,Ce=()=>l.status,Be=()=>{const t=B("control",[m("inputAlign"),{error:ee.value,custom:!!i.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(i.input)return s("div",{class:t,onClick:p},[i.input()]);const r={id:te(),ref:f,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:m("disabled"),readonly:m("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${d}-label`:void 0,onBlur:be,onFocus:he,onInput:D,onClick:p,onChange:re,onKeypress:ke,onCompositionend:re,onCompositionstart:ft};return e.type==="textarea"?s("textarea",r,null):s("input",de(mt(e.type),r),null)},Ie=()=>{const t=i["left-icon"];if(e.leftIcon||t)return s("div",{class:B("left-icon"),onClick:ve},[t?t():s(O,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},we=()=>{const t=i["right-icon"];if(e.rightIcon||t)return s("div",{class:B("right-icon"),onClick:ye},[t?t():s(O,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Pe=()=>{if(e.showWordLimit&&e.maxlength){const t=T(c());return s("div",{class:B("word-limit")},[s("span",{class:B("word-num")},[t]),He("/"),e.maxlength])}},Ve=()=>{if(g&&g.props.showErrorMessage===!1)return;const t=e.errorMessage||l.validateMessage;if(t){const r=i["error-message"],o=m("errorMessageAlign");return s("div",{class:B("error-message",o)},[r?r({message:t}):t])}},Te=()=>{const t=m("labelWidth"),r=m("labelAlign"),o=m("colon")?":":"";if(i.label)return[i.label(),o];if(e.label)return s("label",{id:`${d}-label`,for:i.input?void 0:te(),onClick:h=>{N(h),q()},style:r==="top"&&t?{width:ae(t)}:void 0},[e.label+o])},Ee=()=>[s("div",{class:B("body")},[Be(),x.value&&s(O,{ref:L,name:e.clearIcon,class:B("clear")},null),we(),i.button&&s("div",{class:B("button")},[i.button()])]),Pe(),Ve()];return fe({blur:F,focus:q,validate:u,formValue:V,resetValidation:k,getValidationStatus:Ce}),qe(Ne,{customValue:P,resetValidation:k,validateWithTrigger:b}),We(()=>e.modelValue,()=>{v(c()),k(),b("onChange"),K(G)}),je(()=>{v(c(),e.formatTrigger),K(G)}),Ue("touchstart",Se,{target:_(()=>{var t;return(t=L.value)==null?void 0:t.$el})}),()=>{const t=m("disabled"),r=m("labelAlign"),o=Ie(),h=()=>{const y=Te();return r==="top"?[o,y].filter(Boolean):y||[]};return s(lt,{size:e.size,class:B({error:ee.value,disabled:t,[`label-${r}`]:r}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:xe.value,valueClass:B("value"),titleClass:[B("label",[r,{required:M.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:o&&r!=="top"?()=>o:null,title:h,value:Ee,extra:i.extra})}}});const Vt=U(yt),[St,oe]=W("cell-group"),xt={title:String,inset:Boolean,border:J};var kt=j({name:St,inheritAttrs:!1,props:xt,setup(e,{slots:n,attrs:i}){const d=()=>{var f;return s("div",de({class:[oe({inset:e.inset}),{[Je]:e.border&&!e.inset}]},i,Xe()),[(f=n.default)==null?void 0:f.call(n)])},l=()=>s("div",{class:oe("title",{inset:e.inset})},[n.title?n.title():e.title]);return()=>e.title||n.title?s(Ye,null,[l(),d()]):d()}});const Tt=U(kt);export{wt as B,Tt as C,Pt as F,Vt as a,lt as b};
