import{c as Q,t as Y,n as H,m as F,d as ee,r as B,a as te,u as Ae,b as I,w as E,e as ze,f as $e,g as pe,o as me,h as He,i as Ne,j as We,k as ke,l as Re,p as u,q as Se,s as J,v as se,x as ue,y as Z,z as ae,A as Fe,B as Ve,C as he,D as je,E as Oe,F as de,G as Ue,H as qe,I as fe,J as Ye,K as le,L as Ge,M as Ee,T as xe,N as Ke,O as Je,P as Pe,Q as Qe,R as et,S as tt,U as at,_ as ot,V as ce,W as we,X as p,Y as _e,Z as nt,$ as q,a0 as it,a1 as st,a2 as lt,a3 as ct,a4 as rt,a5 as ut}from"./index-0639aa0e.js";import{g as vt,R as dt,C as ft}from"./index-9ef7bd27.js";import{u as Xe,a as be,L as mt,P as gt,m as ht,b as wt,s as _t,c as yt,d as bt,e as Ce,F as St,f as xt,C as Pt,B as Ct}from"./index-da281209.js";const[Le,re]=Q("swipe"),It={loop:Y,width:H,height:H,vertical:Boolean,autoplay:F(0),duration:F(500),touchable:Y,lazyRender:Boolean,initialSwipe:F(0),indicatorColor:String,showIndicators:Y,stopPropagation:Y},De=Symbol(Le);var Tt=ee({name:Le,props:It,emits:["change","dragStart","dragEnd"],setup(e,{emit:d,slots:v}){const t=B(),i=B(),a=te({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let y=!1;const w=Xe(),{children:g,linkChildren:f}=Ae(De),s=I(()=>g.length),c=I(()=>a[e.vertical?"height":"width"]),_=I(()=>e.vertical?w.deltaY.value:w.deltaX.value),x=I(()=>a.rect?(e.vertical?a.rect.height:a.rect.width)-c.value*s.value:0),T=I(()=>c.value?Math.ceil(Math.abs(x.value)/c.value):s.value),z=I(()=>s.value*c.value),l=I(()=>(a.active+s.value)%s.value),P=I(()=>{const n=e.vertical?"vertical":"horizontal";return w.direction.value===n}),m=I(()=>{const n={transitionDuration:`${a.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+a.offset.toFixed(2)}px)`};if(c.value){const b=e.vertical?"height":"width",S=e.vertical?"width":"height";n[b]=`${z.value}px`,n[S]=e[S]?`${e[S]}px`:""}return n}),X=n=>{const{active:b}=a;return n?e.loop?Z(b+n,-1,s.value):Z(b+n,0,T.value):b},L=(n,b=0)=>{let S=n*c.value;e.loop||(S=Math.min(S,-x.value));let O=b-S;return e.loop||(O=Z(O,x.value,0)),O},R=({pace:n=0,offset:b=0,emitChange:S})=>{if(s.value<=1)return;const{active:O}=a,k=X(n),K=L(k,b);if(e.loop){if(g[0]&&K!==x.value){const ge=K<x.value;g[0].setOffset(ge?z.value:0)}if(g[s.value-1]&&K!==0){const ge=K>0;g[s.value-1].setOffset(ge?-z.value:0)}}a.active=k,a.offset=K,S&&k!==O&&d("change",l.value)},M=()=>{a.swiping=!0,a.active<=-1?R({pace:s.value}):a.active>=s.value&&R({pace:-s.value})},oe=()=>{M(),w.reset(),se(()=>{a.swiping=!1,R({pace:-1,emitChange:!0})})},V=()=>{M(),w.reset(),se(()=>{a.swiping=!1,R({pace:1,emitChange:!0})})};let ne;const N=()=>clearTimeout(ne),W=()=>{N(),+e.autoplay>0&&s.value>1&&(ne=setTimeout(()=>{V(),W()},+e.autoplay))},A=(n=+e.initialSwipe)=>{if(!t.value)return;const b=()=>{var S,O;if(!Se(t)){const k={width:t.value.offsetWidth,height:t.value.offsetHeight};a.rect=k,a.width=+((S=e.width)!=null?S:k.width),a.height=+((O=e.height)!=null?O:k.height)}s.value&&(n=Math.min(s.value-1,n),n===-1&&(n=s.value-1)),a.active=n,a.swiping=!0,a.offset=L(n),g.forEach(k=>{k.setOffset(0)}),W()};Se(t)?J().then(b):b()},G=()=>A(a.active);let ie;const o=n=>{!e.touchable||n.touches.length>1||(w.start(n),y=!1,ie=Date.now(),N(),M())},r=n=>{e.touchable&&a.swiping&&(w.move(n),P.value&&(!e.loop&&(a.active===0&&_.value>0||a.active===s.value-1&&_.value<0)||(ue(n,e.stopPropagation),R({offset:_.value}),y||(d("dragStart",{index:l.value}),y=!0))))},h=()=>{if(!e.touchable||!a.swiping)return;const n=Date.now()-ie,b=_.value/n;if((Math.abs(b)>.25||Math.abs(_.value)>c.value/2)&&P.value){const O=e.vertical?w.offsetY.value:w.offsetX.value;let k=0;e.loop?k=O>0?_.value>0?-1:1:0:k=-Math[_.value>0?"ceil":"floor"](_.value/c.value),R({pace:k,emitChange:!0})}else _.value&&R({pace:0});y=!1,a.swiping=!1,d("dragEnd",{index:l.value}),W()},C=(n,b={})=>{M(),w.reset(),se(()=>{let S;e.loop&&n===s.value?S=a.active===0?0:n:S=n%s.value,b.immediate?se(()=>{a.swiping=!1}):a.swiping=!1,R({pace:S-a.active,emitChange:!0})})},$=(n,b)=>{const S=b===l.value,O=S?{backgroundColor:e.indicatorColor}:void 0;return u("i",{style:O,class:re("indicator",{active:S})},null)},D=()=>{if(v.indicator)return v.indicator({active:l.value,total:s.value});if(e.showIndicators&&s.value>1)return u("div",{class:re("indicators",{vertical:e.vertical})},[Array(s.value).fill("").map($)])};return be({prev:oe,next:V,state:a,resize:G,swipeTo:C}),f({size:c,props:e,count:s,activeIndicator:l}),E(()=>e.initialSwipe,n=>A(+n)),E(s,()=>A(a.active)),E(()=>e.autoplay,W),E([ze,$e,()=>e.width,()=>e.height],G),E(pe(),n=>{n==="visible"?W():N()}),me(A),He(()=>A(a.active)),Ne(()=>A(a.active)),We(N),ke(N),Re("touchmove",r,{target:i}),()=>{var n;return u("div",{ref:t,class:re()},[u("div",{ref:i,style:m.value,class:re("track",{vertical:e.vertical}),onTouchstartPassive:o,onTouchend:h,onTouchcancel:h},[(n=v.default)==null?void 0:n.call(v)]),D()])}}});const Be=ae(Tt),[zt,$t]=Q("swipe-item");var kt=ee({name:zt,setup(e,{slots:d}){let v;const t=te({offset:0,inited:!1,mounted:!1}),{parent:i,index:a}=Fe(De);if(!i)return;const y=I(()=>{const f={},{vertical:s}=i.props;return i.size.value&&(f[s?"height":"width"]=`${i.size.value}px`),t.offset&&(f.transform=`translate${s?"Y":"X"}(${t.offset}px)`),f}),w=I(()=>{const{loop:f,lazyRender:s}=i.props;if(!s||v)return!0;if(!t.mounted)return!1;const c=i.activeIndicator.value,_=i.count.value-1,x=c===0&&f?_:c-1,T=c===_&&f?0:c+1;return v=a.value===c||a.value===x||a.value===T,v}),g=f=>{t.offset=f};return me(()=>{J(()=>{t.mounted=!0})}),be({setOffset:g}),()=>{var f;return u("div",{class:$t(),style:y.value},[w.value?(f=d.default)==null?void 0:f.call(d):null])}}});const Me=ae(kt),[Rt,j]=Q("image"),Ot={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:H,height:H,radius:H,lazyLoad:Boolean,iconSize:H,showError:Y,errorIcon:de("photo-fail"),iconPrefix:String,showLoading:Y,loadingIcon:de("photo")};var Yt=ee({name:Rt,props:Ot,emits:["load","error"],setup(e,{emit:d,slots:v}){const t=B(!1),i=B(!0),a=B(),{$Lazyload:y}=Ve().proxy,w=I(()=>{const l={width:he(e.width),height:he(e.height)};return je(e.radius)&&(l.overflow="hidden",l.borderRadius=he(e.radius)),l});E(()=>e.src,()=>{t.value=!1,i.value=!0});const g=l=>{i.value&&(i.value=!1,d("load",l))},f=()=>{const l=new Event("load");Object.defineProperty(l,"target",{value:a.value,enumerable:!0}),g(l)},s=l=>{t.value=!0,i.value=!1,d("error",l)},c=(l,P,m)=>m?m():u(Ye,{name:l,size:e.iconSize,class:P,classPrefix:e.iconPrefix},null),_=()=>{if(i.value&&e.showLoading)return u("div",{class:j("loading")},[c(e.loadingIcon,j("loading-icon"),v.loading)]);if(t.value&&e.showError)return u("div",{class:j("error")},[c(e.errorIcon,j("error-icon"),v.error)])},x=()=>{if(t.value||!e.src)return;const l={alt:e.alt,class:j("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?Ue(u("img",fe({ref:a},l),null),[[qe("lazy"),e.src]]):u("img",fe({ref:a,src:e.src,onLoad:g,onError:s},l),null)},T=({el:l})=>{const P=()=>{l===a.value&&i.value&&f()};a.value?P():J(P)},z=({el:l})=>{l===a.value&&!t.value&&s()};return y&&Oe&&(y.$on("loaded",T),y.$on("error",z),ke(()=>{y.$off("loaded",T),y.$off("error",z)})),me(()=>{J(()=>{var l;(l=a.value)!=null&&l.complete&&!e.lazyLoad&&f()})}),()=>{var l;return u("div",{class:j({round:e.round,block:e.block}),style:w.value},[x(),_(),(l=v.default)==null?void 0:l.call(v)])}}});const Et=ae(Yt),Ie=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),Xt=e=>({x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}),ye=Q("image-preview")[1],Te=2.6;var Lt=ee({props:{src:String,show:Boolean,active:Number,minZoom:le(H),maxZoom:le(H),rootWidth:le(Number),rootHeight:le(Number),disableZoom:Boolean,doubleScale:Boolean,closeOnClickOverlay:Boolean},emits:["scale","close","longPress"],setup(e,{emit:d,slots:v}){const t=te({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),i=Xe(),a=B(),y=B(),w=B(!1),g=B(!1);let f=0;const s=I(()=>{const{scale:o,moveX:r,moveY:h,moving:C,zooming:$,initializing:D}=t,n={transitionDuration:$||C||D?"0s":".3s"};return(o!==1||g.value)&&(n.transform=`matrix(${o}, 0, 0, ${o}, ${r}, ${h})`),n}),c=I(()=>{if(t.imageRatio){const{rootWidth:o,rootHeight:r}=e,h=w.value?r/t.imageRatio:o;return Math.max(0,(t.scale*h-o)/2)}return 0}),_=I(()=>{if(t.imageRatio){const{rootWidth:o,rootHeight:r}=e,h=w.value?r:o*t.imageRatio;return Math.max(0,(t.scale*h-r)/2)}return 0}),x=(o,r)=>{var h;if(o=Z(o,+e.minZoom,+e.maxZoom+1),o!==t.scale){const C=o/t.scale;if(t.scale=o,r){const $=Ee((h=a.value)==null?void 0:h.$el),D={x:$.width*.5,y:$.height*.5},n=t.moveX-(r.x-$.left-D.x)*(C-1),b=t.moveY-(r.y-$.top-D.y)*(C-1);t.moveX=Z(n,-c.value,c.value),t.moveY=Z(b,-_.value,_.value)}else t.moveX=0,t.moveY=g.value?f:0;d("scale",{scale:o,index:e.active})}},T=()=>{x(1)},z=()=>{const o=t.scale>1?1:2;x(o,o===2||g.value?{x:i.startX.value,y:i.startY.value}:void 0)};let l,P,m,X,L,R,M,oe,V=!1;const ne=o=>{const{touches:r}=o;if(l=r.length,l===2&&e.disableZoom)return;const{offsetX:h}=i;i.start(o),P=t.moveX,m=t.moveY,oe=Date.now(),V=!1,t.moving=l===1&&(t.scale!==1||g.value),t.zooming=l===2&&!h.value,t.zooming&&(X=t.scale,L=Ie(r))},N=o=>{const{touches:r}=o;if(i.move(o),t.moving){const{deltaX:h,deltaY:C}=i,$=h.value+P,D=C.value+m;if(($>c.value||$<-c.value)&&!V&&i.isHorizontal()){t.moving=!1;return}V=!0,ue(o,!0),t.moveX=Z($,-c.value,c.value),t.moveY=Z(D,-_.value,_.value)}if(t.zooming&&(ue(o,!0),r.length===2)){const h=Ie(r),C=X*h/L;R=Xt(r),x(C,R)}},W=o=>{var r;if(l>1)return;const{offsetX:h,offsetY:C}=i,$=Date.now()-oe,D=250;if(h.value<xe&&C.value<xe)if($<D)if(e.doubleScale)if(M)clearTimeout(M),M=null,z();else{if(!e.closeOnClickOverlay&&o.target===((r=y.value)==null?void 0:r.$el))return;M=setTimeout(()=>{d("close"),M=null},D)}else d("close");else $>Ke&&d("longPress")},A=o=>{let r=!1;if((t.moving||t.zooming)&&(r=!0,t.moving&&P===t.moveX&&m===t.moveY&&(r=!1),!o.touches.length)){t.zooming&&(t.moveX=Z(t.moveX,-c.value,c.value),t.moveY=Z(t.moveY,-_.value,_.value),t.zooming=!1),t.moving=!1,P=0,m=0,X=1,t.scale<1&&T();const h=+e.maxZoom;t.scale>h&&x(h,R)}ue(o,r),W(o),i.reset()},G=()=>{const{rootWidth:o,rootHeight:r}=e,h=r/o,{imageRatio:C}=t;w.value=t.imageRatio>h&&C<Te,g.value=t.imageRatio>h&&C>=Te,g.value&&(f=(C*o-r)/2,t.moveY=f,t.initializing=!0,Ge(()=>{t.initializing=!1})),T()},ie=o=>{const{naturalWidth:r,naturalHeight:h}=o.target;t.imageRatio=h/r,G()};return E(()=>e.active,T),E(()=>e.show,o=>{o||T()}),E(()=>[e.rootWidth,e.rootHeight],G),Re("touchmove",N,{target:I(()=>{var o;return(o=y.value)==null?void 0:o.$el})}),()=>{const o={loading:()=>u(mt,{type:"spinner"},null)};return u(Me,{ref:y,class:ye("swipe-item"),onTouchstartPassive:ne,onTouchend:A,onTouchcancel:A},{default:()=>[v.image?u("div",{class:ye("image-wrap")},[v.image({src:e.src})]):u(Et,{ref:a,src:e.src,fit:"contain",class:ye("image",{vertical:w.value}),style:s.value,onLoad:ie},o)]})}}});const[Dt,U]=Q("image-preview"),Bt=["show","teleport","transition","overlayStyle","closeOnPopstate"],Mt={show:Boolean,loop:Y,images:Je(),minZoom:F(1/3),maxZoom:F(3),overlay:Y,closeable:Boolean,showIndex:Y,className:Pe,closeIcon:de("clear"),transition:String,beforeClose:Function,doubleScale:Y,overlayClass:Pe,overlayStyle:Object,swipeDuration:F(300),startPosition:F(0),showIndicators:Boolean,closeOnPopstate:Y,closeOnClickOverlay:Y,closeIconPosition:de("top-right"),teleport:[String,Object]};var Ze=ee({name:Dt,props:Mt,emits:["scale","close","closed","change","longPress","update:show"],setup(e,{emit:d,slots:v}){const t=B(),i=te({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),a=()=>{if(t.value){const m=Ee(t.value.$el);i.rootWidth=m.width,i.rootHeight=m.height,t.value.resize()}},y=m=>d("scale",m),w=m=>d("update:show",m),g=()=>{tt(e.beforeClose,{args:[i.active],done:()=>w(!1)})},f=m=>{m!==i.active&&(i.active=m,d("change",m))},s=()=>{if(e.showIndex)return u("div",{class:U("index")},[v.index?v.index({index:i.active}):`${i.active+1} / ${e.images.length}`])},c=()=>{if(v.cover)return u("div",{class:U("cover")},[v.cover()])},_=()=>{i.disableZoom=!0},x=()=>{i.disableZoom=!1},T=()=>u(Be,{ref:t,lazyRender:!0,loop:e.loop,class:U("swipe"),duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:f,onDragEnd:x,onDragStart:_},{default:()=>[e.images.map((m,X)=>u(Lt,{src:m,show:e.show,active:i.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:i.rootWidth,rootHeight:i.rootHeight,disableZoom:i.disableZoom,doubleScale:e.doubleScale,closeOnClickOverlay:e.closeOnClickOverlay,onScale:y,onClose:g,onLongPress:()=>d("longPress",{index:X})},{image:v.image}))]}),z=()=>{if(e.closeable)return u(Ye,{role:"button",name:e.closeIcon,class:[U("close-icon",e.closeIconPosition),et],onClick:g},null)},l=()=>d("closed"),P=(m,X)=>{var L;return(L=t.value)==null?void 0:L.swipeTo(m,X)};return be({swipeTo:P}),me(a),E([ze,$e],a),E(()=>e.startPosition,m=>f(+m)),E(()=>e.show,m=>{const{images:X,startPosition:L}=e;m?(f(+L),J(()=>{a(),P(+L,{immediate:!0})})):d("close",{index:i.active,url:X[i.active]})}),()=>u(gt,fe({class:[U(),e.className],overlayClass:[U("overlay"),e.overlayClass],onClosed:l,"onUpdate:show":w},Qe(e,Bt)),{default:()=>[z(),T(),s(),c()]})}});let ve;const Zt={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"};function At(){({instance:ve}=ht({setup(){const{state:e,toggle:d}=wt(),v=()=>{e.images=[]};return()=>u(Ze,fe(e,{onClosed:v,"onUpdate:show":d}),null)}}))}const pt=(e,d=0)=>{if(Oe)return ve||At(),e=Array.isArray(e)?{images:e,startPosition:d}:e,ve.open(at({},Zt,e)),ve};ae(Ze);ae(_t);const Ht=e=>(ct("data-v-3cf41627"),e=e(),rt(),e),Nt={class:"zh-body"},Wt={class:"zh-button"},Ft={key:0},Vt=["src"],jt=Ht(()=>q("div",{class:"zh_footer_tips"},[q("h4",{class:"app-font-danger"},"使用须知:"),q("p",null," ⭐️ 温馨提示: 粘贴图集地址时无需删除文案，但如果图集链接正确但解析失败请删掉文案后重试 "),q("p",null,"⭐️ 支持平台: 抖音、皮皮虾、皮皮搞笑、微博、最右、快手...")],-1)),Ut={__name:"index",setup(e){const d=te({url:""});let v=B([]);const t=()=>{const{url:a}=d;let y="";const w=/https?:\/\/[^\s]+/,g=a.match(w);g&&g.length>0?y=g[0]:console.log("Invalid share URL");const f={url:y};yt({message:"解析中...",forbidClick:!0}),vt(f).then(s=>{bt(),s.code===200?(v.value=s.data.images,Ce({type:"success",message:s.msg||"解析成功"})):Ce({type:"danger",message:s.msg||"解析失败"})})},i=a=>{pt({images:v.value,startPosition:a})};return(a,y)=>{const w=xt,g=Pt,f=Ct,s=ft,c=dt,_=St,x=Me,T=Be;return ce(),we("div",Nt,[u(_,{onSubmit:t},{default:p(()=>[u(g,{inset:""},{default:p(()=>[u(w,{modelValue:d.url,"onUpdate:modelValue":y[0]||(y[0]=z=>d.url=z),name:"url",label:"链接",rows:"3",autosize:"",type:"textarea",placeholder:"将分享的地址粘贴到这里就可以去水印了呀",required:"",rules:[{required:!0,message:"请输入需要去水印的地址链接或者文字内容"}]},null,8,["modelValue"])]),_:1}),q("div",Wt,[u(c,{justify:"center"},{default:p(()=>[u(s,{span:"8"},{default:p(()=>[u(f,{block:"",icon:"certificate",type:"primary",size:"small","native-type":"submit"},{default:p(()=>[it(" 去水印 ")]),_:1})]),_:1})]),_:1})])]),_:1}),_e(v)&&_e(v).length?(ce(),we("div",Ft,[u(c,{justify:"center"},{default:p(()=>[u(s,{span:"22"},{default:p(()=>[u(T,{"lazy-render":""},{default:p(()=>[(ce(!0),we(st,null,lt(_e(v),(z,l)=>(ce(),ut(x,{key:z,onClick:P=>i(l)},{default:p(()=>[q("img",{src:z},null,8,Vt)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})])):nt("",!0),jt])}}},Jt=ot(Ut,[["__scopeId","data-v-3cf41627"]]);export{Jt as default};
