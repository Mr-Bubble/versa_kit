import{a0 as ee,a1 as be,a2 as ge,a3 as He,i as S,a4 as Ee,$ as Ve,a5 as We,a6 as je,a7 as ye,k as F,T as L,y as we,n as D,m as M,a8 as xe,r as ne,N as I,a9 as Te,s as ke,aa as Fe,O as B,Q as Se,d as g,ab as te,ac as z,P as p,ad as _e,ae as Me,w as ie,af as Q,j as Ze,A as j,D as Ue,ag as qe,ah as Xe,q as de,C as ae,ai as Ke,J as Ye,aj as ue,ak as Je,al as Qe,am as Ge,M as et,an as tt,ao as at,ap as nt,V as it,Z as fe,aq as lt,x as ot,l as st,ar as rt,as as ct,at as dt,au as ut,X as ft,c as Y,a as E,b as vt,e as ve,av as ht,u as V,o as W,F as mt,g as bt,h as gt,f as yt}from"./index-BSIoVOQp.js";import{D as wt}from"./index-JBpG6-Bw.js";import{a as xt}from"./index-BS61U3TY.js";import{u as Ce}from"./use-id-DTfwbIp6.js";import{u as le,L as Tt,s as kt,c as St}from"./index-DHy7Sj1d.js";import{S as _t,a as Ct,I as It,b as Rt}from"./function-call-CS3y1biL.js";function Bt(e,n,l){let i,u=0;const t=e.scrollLeft,s=l===0?1:Math.round(l*1e3/16);let c=t;function o(){be(i)}function h(){c+=(n-t)/s,e.scrollLeft=c,++u<s&&(i=ee(h))}return h(),o}function $t(e,n,l,i){let u,t=ge(e);const s=t<n,c=l===0?1:Math.round(l*1e3/16),o=(n-t)/c;function h(){be(u)}function y(){t+=o,(s&&t>n||!s&&t<n)&&(t=n),He(e,t),s&&t<n||!s&&t>n?u=ee(y):i&&(u=ee(i))}return y(),h}function pt(){const e=S([]),n=[];return Ee(()=>{e.value=[]}),[e,i=>(n[i]||(n[i]=u=>{e.value[i]=u}),n[i])]}function Ie(e,n){if(!Ve||!window.IntersectionObserver)return;const l=new IntersectionObserver(t=>{n(t[0].intersectionRatio>0)},{root:document.body}),i=()=>{e.value&&l.observe(e.value)},u=()=>{e.value&&l.unobserve(e.value)};We(u),je(u),ye(i)}const[Pt,Dt]=M("sticky"),At={zIndex:D,position:we("top"),container:Object,offsetTop:L(0),offsetBottom:L(0)};var Lt=F({name:Pt,props:At,emits:["scroll","change"],setup(e,{emit:n,slots:l}){const i=S(),u=xe(i),t=ne({fixed:!1,width:0,height:0,transform:0}),s=S(!1),c=I(()=>Te(e.position==="top"?e.offsetTop:e.offsetBottom)),o=I(()=>{if(s.value)return;const{fixed:f,height:T,width:d}=t;if(f)return{width:`${d}px`,height:`${T}px`}}),h=I(()=>{if(!t.fixed||s.value)return;const f=ke(Fe(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${c.value}px`});return t.transform&&(f.transform=`translate3d(0, ${t.transform}px, 0)`),f}),y=f=>n("scroll",{scrollTop:f,isFixed:t.fixed}),_=()=>{if(!i.value||te(i))return;const{container:f,position:T}=e,d=z(i),w=ge(window);if(t.width=d.width,t.height=d.height,T==="top")if(f){const v=z(f),R=v.bottom-c.value-t.height;t.fixed=c.value>d.top&&v.bottom>0,t.transform=R<0?R:0}else t.fixed=c.value>d.top;else{const{clientHeight:v}=document.documentElement;if(f){const R=z(f),b=v-R.top-c.value-t.height;t.fixed=v-c.value<d.bottom&&v>R.top,t.transform=b<0?-b:0}else t.fixed=v-c.value<d.bottom}y(w)};return B(()=>t.fixed,f=>n("change",f)),Se("scroll",_,{target:u,passive:!0}),Ie(i,_),B([_e,Me],()=>{!i.value||te(i)||!t.fixed||(s.value=!0,p(()=>{const f=z(i);t.width=f.width,t.height=f.height,s.value=!1}))}),()=>{var f;return g("div",{ref:i,style:o.value},[g("div",{class:Dt({fixed:t.fixed&&!s.value}),style:h.value},[(f=l.default)==null?void 0:f.call(l)])])}}});const zt=ie(Lt),[Nt,he]=M("tabs");var Ot=F({name:Nt,props:{count:Q(Number),inited:Boolean,animated:Boolean,duration:Q(D),swipeable:Boolean,lazyRender:Boolean,currentIndex:Q(Number)},emits:["change"],setup(e,{emit:n,slots:l}){const i=S(),u=c=>n("change",c),t=()=>{var c;const o=(c=l.default)==null?void 0:c.call(l);return e.animated||e.swipeable?g(_t,{ref:i,loop:!1,class:he("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:u},{default:()=>[o]}):o},s=c=>{const o=i.value;o&&o.state.active!==c&&o.swipeTo(c,{immediate:!e.inited})};return B(()=>e.currentIndex,s),Ze(()=>{s(e.currentIndex)}),le({swipeRef:i}),()=>g("div",{class:he("content",{animated:e.animated||e.swipeable})},[t()])}});const[Re,J]=M("tabs"),Ht={type:we("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:L(0),duration:L(.3),animated:Boolean,ellipsis:j,swipeable:Boolean,scrollspy:Boolean,offsetTop:L(0),background:String,lazyRender:j,showHeader:j,lineWidth:D,lineHeight:D,beforeChange:Function,swipeThreshold:L(5),titleActiveColor:String,titleInactiveColor:String},Be=Symbol(Re);var Et=F({name:Re,props:Ht,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:n,slots:l}){let i,u,t,s,c;const o=S(),h=S(),y=S(),_=S(),f=Ce(),T=xe(o),[d,w]=pt(),{children:v,linkChildren:R}=Ue(Be),b=ne({inited:!1,position:"",lineStyle:{},currentIndex:-1}),N=I(()=>v.length>+e.swipeThreshold||!e.ellipsis||e.shrink),Z=I(()=>({borderColor:e.color,background:e.background})),O=(a,r)=>{var m;return(m=a.name)!=null?m:r},U=I(()=>{const a=v[b.currentIndex];if(a)return O(a,b.currentIndex)}),A=I(()=>Te(e.offsetTop)),oe=I(()=>e.sticky?A.value+i:0),H=a=>{const r=h.value,m=d.value;if(!N.value||!r||!m||!m[b.currentIndex])return;const k=m[b.currentIndex].$el,x=k.offsetLeft-(r.offsetWidth-k.offsetWidth)/2;s&&s(),s=Bt(r,x,a?0:+e.duration)},$=()=>{const a=b.inited;p(()=>{const r=d.value;if(!r||!r[b.currentIndex]||e.type!=="line"||te(o.value))return;const m=r[b.currentIndex].$el,{lineWidth:k,lineHeight:x}=e,C=m.offsetLeft+m.offsetWidth/2,P={width:de(k),backgroundColor:e.color,transform:`translateX(${C}px) translateX(-50%)`};if(a&&(P.transitionDuration=`${e.duration}s`),ae(x)){const K=de(x);P.height=K,P.borderRadius=K}b.lineStyle=P})},$e=a=>{const r=a<b.currentIndex?-1:1;for(;a>=0&&a<v.length;){if(!v[a].disabled)return a;a+=r}},q=(a,r)=>{const m=$e(a);if(!ae(m))return;const k=v[m],x=O(k,m),C=b.currentIndex!==null;b.currentIndex!==m&&(b.currentIndex=m,r||H(),$()),x!==e.active&&(n("update:active",x),C&&n("change",x,k.title)),t&&!e.scrollspy&&Ye(Math.ceil(ue(o.value)-A.value))},X=(a,r)=>{const m=v.find((x,C)=>O(x,C)===a),k=m?v.indexOf(m):0;q(k,r)},se=(a=!1)=>{if(e.scrollspy){const r=v[b.currentIndex].$el;if(r&&T.value){const m=ue(r,T.value)-oe.value;u=!0,c&&c(),c=$t(T.value,m,a?0:+e.duration,()=>{u=!1})}}},pe=(a,r,m)=>{const{title:k,disabled:x}=v[r],C=O(v[r],r);x||(Je(e.beforeChange,{args:[C],done:()=>{q(r),se()}}),Qe(a)),n("clickTab",{name:C,title:k,event:m,disabled:x})},Pe=a=>{t=a.isFixed,n("scroll",a)},De=a=>{p(()=>{X(a),se(!0)})},Ae=()=>{for(let a=0;a<v.length;a++){const{top:r}=z(v[a].$el);if(r>oe.value)return a===0?0:a-1}return v.length-1},Le=()=>{if(e.scrollspy&&!u){const a=Ae();q(a)}},ze=()=>{if(e.type==="line"&&v.length)return g("div",{class:J("line"),style:b.lineStyle},null)},re=()=>{var a,r,m;const{type:k,border:x,sticky:C}=e,P=[g("div",{ref:C?void 0:y,class:[J("wrap"),{[Ke]:k==="line"&&x}]},[g("div",{ref:h,role:"tablist",class:J("nav",[k,{shrink:e.shrink,complete:N.value}]),style:Z.value,"aria-orientation":"horizontal"},[(a=l["nav-left"])==null?void 0:a.call(l),v.map(K=>K.renderTitle(pe)),ze(),(r=l["nav-right"])==null?void 0:r.call(l)])]),(m=l["nav-bottom"])==null?void 0:m.call(l)];return C?g("div",{ref:y},[P]):P},ce=()=>{$(),p(()=>{var a,r;H(!0),(r=(a=_.value)==null?void 0:a.swipeRef.value)==null||r.resize()})};B(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],$),B(_e,ce),B(()=>e.active,a=>{a!==U.value&&X(a)}),B(()=>v.length,()=>{b.inited&&(X(e.active),$(),p(()=>{H(!0)}))});const Ne=()=>{X(e.active,!0),p(()=>{b.inited=!0,y.value&&(i=z(y.value).height),H(!0)})},Oe=(a,r)=>n("rendered",a,r);return le({resize:ce,scrollTo:De}),qe($),Xe($),ye(Ne),Ie(o,$),Se("scroll",Le,{target:T,passive:!0}),R({id:f,props:e,setLine:$,scrollable:N,onRendered:Oe,currentName:U,setTitleRefs:w,scrollIntoView:H}),()=>g("div",{ref:o,class:J([e.type])},[e.showHeader?e.sticky?g(zt,{container:o.value,offsetTop:A.value,onScroll:Pe},{default:()=>[re()]}):re():null,g(Ot,{ref:_,count:v.length,inited:b.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:b.currentIndex,onChange:q},{default:()=>{var a;return[(a=l.default)==null?void 0:a.call(l)]}})])}});const Vt=Symbol(),[Wt,me]=M("tab"),jt=F({name:Wt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:D,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:j},setup(e,{slots:n}){const l=I(()=>{const u={},{type:t,color:s,disabled:c,isActive:o,activeColor:h,inactiveColor:y}=e;s&&t==="card"&&(u.borderColor=s,c||(o?u.backgroundColor=s:u.color=s));const f=o?h:y;return f&&(u.color=f),u}),i=()=>{const u=g("span",{class:me("text",{ellipsis:!e.scrollable})},[n.title?n.title():e.title]);return e.dot||ae(e.badge)&&e.badge!==""?g(Ge,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[u]}):u};return()=>g("div",{id:e.id,role:"tab",class:[me([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:l.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls,"data-allow-mismatch":"attribute"},[i()])}}),[Ft,G]=M("tab"),Mt=ke({},ot,{dot:Boolean,name:D,badge:D,title:String,disabled:Boolean,titleClass:st,titleStyle:[String,Object],showZeroBadge:j});var Zt=F({name:Ft,props:Mt,setup(e,{slots:n}){const l=Ce(),i=S(!1),u=lt(),{parent:t,index:s}=et(Be);if(!t)return;const c=()=>{var d;return(d=e.name)!=null?d:s.value},o=()=>{i.value=!0,t.props.lazyRender&&p(()=>{t.onRendered(c(),e.title)})},h=I(()=>{const d=c()===t.currentName.value;return d&&!i.value&&o(),d}),y=S(""),_=S("");tt(()=>{const{titleClass:d,titleStyle:w}=e;y.value=d?rt(d):"",_.value=w&&typeof w!="string"?ct(dt(w)):w});const f=d=>g(jt,it({key:l,id:`${t.id}-${s.value}`,ref:t.setTitleRefs(s.value),style:_.value,class:y.value,isActive:h.value,controls:l,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:w=>d(u.proxy,s.value,w)},fe(t.props,["type","color","shrink"]),fe(e,["dot","badge","title","disabled","showZeroBadge"])),{title:n.title}),T=S(!h.value);return B(h,d=>{d?T.value=!1:ut(()=>{T.value=!0})}),B(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),ft(Vt,h),le({id:l,renderTitle:f}),()=>{var d;const w=`${t.id}-${s.value}`,{animated:v,swipeable:R,scrollspy:b,lazyRender:N}=t.props;if(!n.default&&!v)return;const Z=b||h.value;if(v||R)return g(Ct,{id:l,role:"tabpanel",class:G("panel-wrapper",{inactive:T.value}),tabindex:h.value?0:-1,"aria-hidden":!h.value,"aria-labelledby":w,"data-allow-mismatch":"attribute"},{default:()=>{var A;return[g("div",{class:G("panel")},[(A=n.default)==null?void 0:A.call(n)])]}});const U=i.value||b||!N?(d=n.default)==null?void 0:d.call(n):null;return at(g("div",{id:l,role:"tabpanel",class:G("panel"),tabindex:Z?0:-1,"aria-labelledby":w,"data-allow-mismatch":"attribute"},[U]),[[nt,Z]])}}});const Ut=ie(Zt),qt=ie(Et),Xt={class:"min-h-[calc(100vh-99px)] bg-gray-50 dark:bg-gray-900 py-5 px-4"},Kt={class:"mb-4"},Yt={key:0,class:"flex h-40 items-center justify-center"},Jt={key:1,class:"space-y-4"},Qt={class:"flex justify-center"},Gt={class:"w-11/12"},oa={__name:"index",setup(e){let n=S(0),l=S(!1);const i=ne([{title:"日常任务位置",api:"scrw",imagesData:""},{title:"季节蜡烛位置",api:"scjl",imagesData:""},{title:"大蜡烛位置",api:"scdl",imagesData:""}]),u=()=>{i[n.value].imagesData||t()},t=()=>{p(()=>{l.value=!0}),kt({message:"生成中...",forbidClick:!0,duration:0});const c=i[n.value].api;xt(c).then(o=>{if(o&&o.type&&o.type.startsWith("image/")){const h=new FileReader;h.onloadend=function(){i[n.value].imagesData=h.result},h.readAsDataURL(o)}St(),l.value=!1})};t();const s=()=>{Rt([i[n.value].imagesData])};return(c,o)=>{const h=Ut,y=qt,_=Tt,f=wt,T=It;return W(),Y("div",Xt,[o[2]||(o[2]=E("div",{class:"mb-4 rounded-lg bg-white dark:bg-gray-800 p-3 text-sm text-gray-600 dark:text-gray-300 shadow-sm"},[E("p",null,"⭐️ 点击图片即可预览,长按图片即可保存")],-1)),E("div",Kt,[g(y,{active:V(n),"onUpdate:active":o[0]||(o[0]=d=>ht(n)?n.value=d:n=d),onChange:u,animated:"",swipeable:"",class:"rounded-lg bg-white dark:bg-gray-800 shadow-sm"},{default:ve(()=>[(W(!0),Y(mt,null,bt(i,(d,w)=>(W(),gt(h,{key:w,title:d.title,disabled:V(l),class:"text-sm dark:text-gray-200"},null,8,["title","disabled"]))),128))]),_:1},8,["active"])]),V(l)?(W(),Y("div",Yt,[g(_,{vertical:""},{default:ve(()=>o[1]||(o[1]=[yt("加载中...")])),_:1})])):i[V(n)].imagesData?(W(),Y("div",Jt,[g(f,{class:"!my-4 dark:border-gray-700"}),E("div",Qt,[E("div",Gt,[g(T,{src:i[V(n)].imagesData,onClick:s,class:"rounded-lg shadow-md transition-transform hover:scale-[1.02]"},null,8,["src"])])])])):vt("",!0)])}}};export{oa as default};
