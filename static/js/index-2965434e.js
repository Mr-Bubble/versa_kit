import{a1 as ge,a2 as ee,a3 as we,a4 as He,j as S,a5 as Ve,a0 as We,a6 as Fe,a7 as Ue,a8 as ye,l as F,q as D,z as _e,O as A,m as U,a9 as xe,r as ne,Q as R,aa as Te,x as Se,ab as je,T as B,V as Ce,ac as te,U as $,ad as L,ae as ke,af as Me,a as b,w as oe,ag as G,k as Ze,D as W,G as qe,ah as Ke,ai as Ye,v as de,E as ae,$ as Xe,K as Ge,aj as ue,ak as Qe,al as Je,am as et,y as tt,s as at,P as nt,an as ot,ao as it,ap as lt,aq as st,ar as rt,R as ct,as as dt,Y as ut,at as fe,au as ft,av as vt,_ as ht,o as H,c as Q,b as Y,u as V,aw as mt,i as ve,d as bt,F as gt,g as wt,f as yt,p as _t,h as xt,e as he}from"./index-adafa2a9.js";import{R as Tt,C as St}from"./index-be49b070.js";import{D as Ct}from"./index-4bf7fc56.js";import{a as kt}from"./index-b4eb8bc5.js";import{u as Ie}from"./use-id-e005f096.js";import{u as ie,s as It,c as Rt,L as Bt}from"./index-92c58a15.js";import{S as pt,a as $t,s as Pt,I as Dt}from"./function-call-519830e0.js";function zt(e,n,i){let o,d=0;const t=e.scrollLeft,l=i===0?1:Math.round(i*1e3/16);function u(){ge(o)}function s(){e.scrollLeft+=(n-t)/l,++d<l&&(o=ee(s))}return s(),u}function At(e,n,i,o){let d,t=we(e);const l=t<n,u=i===0?1:Math.round(i*1e3/16),s=(n-t)/u;function g(){ge(d)}function w(){t+=s,(l&&t>n||!l&&t<n)&&(t=n),He(e,t),l&&t<n||!l&&t>n?d=ee(w):o&&(d=ee(o))}return w(),g}function Lt(){const e=S([]),n=[];return Ve(()=>{e.value=[]}),[e,o=>(n[o]||(n[o]=d=>{e.value[o]=d}),n[o])]}function Re(e,n){if(!We||!window.IntersectionObserver)return;const i=new IntersectionObserver(t=>{n(t[0].intersectionRatio>0)},{root:document.body}),o=()=>{e.value&&i.observe(e.value)},d=()=>{e.value&&i.unobserve(e.value)};Fe(d),Ue(d),ye(o)}const[Nt,Ot]=F("sticky"),Et={zIndex:D,position:_e("top"),container:Object,offsetTop:A(0),offsetBottom:A(0)};var Ht=U({name:Nt,props:Et,emits:["scroll","change"],setup(e,{emit:n,slots:i}){const o=S(),d=xe(o),t=ne({fixed:!1,width:0,height:0,transform:0}),l=S(!1),u=R(()=>Te(e.position==="top"?e.offsetTop:e.offsetBottom)),s=R(()=>{if(l.value)return;const{fixed:v,height:x,width:f}=t;if(v)return{width:`${f}px`,height:`${x}px`}}),g=R(()=>{if(!t.fixed||l.value)return;const v=Se(je(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${u.value}px`});return t.transform&&(v.transform=`translate3d(0, ${t.transform}px, 0)`),v}),w=v=>n("scroll",{scrollTop:v,isFixed:t.fixed}),C=()=>{if(!o.value||te(o))return;const{container:v,position:x}=e,f=L(o),y=we(window);if(t.width=f.width,t.height=f.height,x==="top")if(v){const r=L(v),k=r.bottom-u.value-t.height;t.fixed=u.value>f.top&&r.bottom>0,t.transform=k<0?k:0}else t.fixed=u.value>f.top;else{const{clientHeight:r}=document.documentElement;if(v){const k=L(v),m=r-k.top-u.value-t.height;t.fixed=r-u.value<f.bottom&&r>k.top,t.transform=m<0?-m:0}else t.fixed=r-u.value<f.bottom}w(y)};return B(()=>t.fixed,v=>n("change",v)),Ce("scroll",C,{target:d,passive:!0}),Re(o,C),B([ke,Me],()=>{!o.value||te(o)||!t.fixed||(l.value=!0,$(()=>{const v=L(o);t.width=v.width,t.height=v.height,l.value=!1}))}),()=>{var v;return b("div",{ref:o,style:s.value},[b("div",{class:Ot({fixed:t.fixed&&!l.value}),style:g.value},[(v=i.default)==null?void 0:v.call(i)])])}}});const Vt=oe(Ht),[Wt,me]=F("tabs");var Ft=U({name:Wt,props:{count:G(Number),inited:Boolean,animated:Boolean,duration:G(D),swipeable:Boolean,lazyRender:Boolean,currentIndex:G(Number)},emits:["change"],setup(e,{emit:n,slots:i}){const o=S(),d=u=>n("change",u),t=()=>{var u;const s=(u=i.default)==null?void 0:u.call(i);return e.animated||e.swipeable?b(pt,{ref:o,loop:!1,class:me("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:d},{default:()=>[s]}):s},l=u=>{const s=o.value;s&&s.state.active!==u&&s.swipeTo(u,{immediate:!e.inited})};return B(()=>e.currentIndex,l),Ze(()=>{l(e.currentIndex)}),ie({swipeRef:o}),()=>b("div",{class:me("content",{animated:e.animated||e.swipeable})},[t()])}});const[Be,X]=F("tabs"),Ut={type:_e("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:A(0),duration:A(.3),animated:Boolean,ellipsis:W,swipeable:Boolean,scrollspy:Boolean,offsetTop:A(0),background:String,lazyRender:W,showHeader:W,lineWidth:D,lineHeight:D,beforeChange:Function,swipeThreshold:A(5),titleActiveColor:String,titleInactiveColor:String},pe=Symbol(Be);var jt=U({name:Be,props:Ut,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:n,slots:i}){let o,d,t,l,u;const s=S(),g=S(),w=S(),C=S(),v=Ie(),x=xe(s),[f,y]=Lt(),{children:r,linkChildren:k}=qe(pe),m=ne({inited:!1,position:"",lineStyle:{},currentIndex:-1}),N=R(()=>r.length>+e.swipeThreshold||!e.ellipsis||e.shrink),j=R(()=>({borderColor:e.color,background:e.background})),O=(a,c)=>{var h;return(h=a.name)!=null?h:c},M=R(()=>{const a=r[m.currentIndex];if(a)return O(a,m.currentIndex)}),z=R(()=>Te(e.offsetTop)),le=R(()=>e.sticky?z.value+o:0),E=a=>{const c=g.value,h=f.value;if(!N.value||!c||!h||!h[m.currentIndex])return;const T=h[m.currentIndex].$el,_=T.offsetLeft-(c.offsetWidth-T.offsetWidth)/2;l&&l(),l=zt(c,_,a?0:+e.duration)},p=()=>{const a=m.inited;$(()=>{const c=f.value;if(!c||!c[m.currentIndex]||e.type!=="line"||te(s.value))return;const h=c[m.currentIndex].$el,{lineWidth:T,lineHeight:_}=e,I=h.offsetLeft+h.offsetWidth/2,P={width:de(T),backgroundColor:e.color,transform:`translateX(${I}px) translateX(-50%)`};if(a&&(P.transitionDuration=`${e.duration}s`),ae(_)){const K=de(_);P.height=K,P.borderRadius=K}m.lineStyle=P})},$e=a=>{const c=a<m.currentIndex?-1:1;for(;a>=0&&a<r.length;){if(!r[a].disabled)return a;a+=c}},Z=(a,c)=>{const h=$e(a);if(!ae(h))return;const T=r[h],_=O(T,h),I=m.currentIndex!==null;m.currentIndex!==h&&(m.currentIndex=h,c||E(),p()),_!==e.active&&(n("update:active",_),I&&n("change",_,T.title)),t&&!e.scrollspy&&Ge(Math.ceil(ue(s.value)-z.value))},q=(a,c)=>{const h=r.find((_,I)=>O(_,I)===a),T=h?r.indexOf(h):0;Z(T,c)},se=(a=!1)=>{if(e.scrollspy){const c=r[m.currentIndex].$el;if(c&&x.value){const h=ue(c,x.value)-le.value;d=!0,u&&u(),u=At(x.value,h,a?0:+e.duration,()=>{d=!1})}}},Pe=(a,c,h)=>{const{title:T,disabled:_}=r[c],I=O(r[c],c);_||(Qe(e.beforeChange,{args:[I],done:()=>{Z(c),se()}}),Je(a)),n("clickTab",{name:I,title:T,event:h,disabled:_})},De=a=>{t=a.isFixed,n("scroll",a)},ze=a=>{$(()=>{q(a),se(!0)})},Ae=()=>{for(let a=0;a<r.length;a++){const{top:c}=L(r[a].$el);if(c>le.value)return a===0?0:a-1}return r.length-1},Le=()=>{if(e.scrollspy&&!d){const a=Ae();Z(a)}},Ne=()=>{if(e.type==="line"&&r.length)return b("div",{class:X("line"),style:m.lineStyle},null)},re=()=>{var a,c,h;const{type:T,border:_,sticky:I}=e,P=[b("div",{ref:I?void 0:w,class:[X("wrap"),{[Xe]:T==="line"&&_}]},[b("div",{ref:g,role:"tablist",class:X("nav",[T,{shrink:e.shrink,complete:N.value}]),style:j.value,"aria-orientation":"horizontal"},[(a=i["nav-left"])==null?void 0:a.call(i),r.map(K=>K.renderTitle(Pe)),Ne(),(c=i["nav-right"])==null?void 0:c.call(i)])]),(h=i["nav-bottom"])==null?void 0:h.call(i)];return I?b("div",{ref:w},[P]):P},ce=()=>{p(),$(()=>{var a,c;E(!0),(c=(a=C.value)==null?void 0:a.swipeRef.value)==null||c.resize()})};B(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],p),B(ke,ce),B(()=>e.active,a=>{a!==M.value&&q(a)}),B(()=>r.length,()=>{m.inited&&(q(e.active),p(),$(()=>{E(!0)}))});const Oe=()=>{q(e.active,!0),$(()=>{m.inited=!0,w.value&&(o=L(w.value).height),E(!0)})},Ee=(a,c)=>n("rendered",a,c);return ie({resize:ce,scrollTo:ze}),Ke(p),Ye(p),ye(Oe),Re(s,p),Ce("scroll",Le,{target:x,passive:!0}),k({id:v,props:e,setLine:p,scrollable:N,onRendered:Ee,currentName:M,setTitleRefs:y,scrollIntoView:E}),()=>b("div",{ref:s,class:X([e.type])},[e.showHeader?e.sticky?b(Vt,{container:s.value,offsetTop:z.value,onScroll:De},{default:()=>[re()]}):re():null,b(Ft,{ref:C,count:r.length,inited:m.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:m.currentIndex,onChange:Z},{default:()=>{var a;return[(a=i.default)==null?void 0:a.call(i)]}})])}});const Mt=Symbol(),[Zt,be]=F("tab"),qt=U({name:Zt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:D,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:W},setup(e,{slots:n}){const i=R(()=>{const d={},{type:t,color:l,disabled:u,isActive:s,activeColor:g,inactiveColor:w}=e;l&&t==="card"&&(d.borderColor=l,u||(s?d.backgroundColor=l:d.color=l));const v=s?g:w;return v&&(d.color=v),d}),o=()=>{const d=b("span",{class:be("text",{ellipsis:!e.scrollable})},[n.title?n.title():e.title]);return e.dot||ae(e.badge)&&e.badge!==""?b(et,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[d]}):d};return()=>b("div",{id:e.id,role:"tab",class:[be([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[o()])}}),[Kt,J]=F("tab"),Yt=Se({},tt,{dot:Boolean,name:D,badge:D,title:String,disabled:Boolean,titleClass:at,titleStyle:[String,Object],showZeroBadge:W});var Xt=U({name:Kt,props:Yt,setup(e,{slots:n}){const i=Ie(),o=S(!1),d=vt(),{parent:t,index:l}=nt(pe);if(!t)return;const u=()=>{var f;return(f=e.name)!=null?f:l.value},s=()=>{o.value=!0,t.props.lazyRender&&$(()=>{t.onRendered(u(),e.title)})},g=R(()=>{const f=u()===t.currentName.value;return f&&!o.value&&s(),f}),w=S(""),C=S("");ot(()=>{const{titleClass:f,titleStyle:y}=e;w.value=f?it(f):"",C.value=y&&typeof y!="string"?lt(st(y)):y});const v=f=>b(qt,ut({key:i,id:`${t.id}-${l.value}`,ref:t.setTitleRefs(l.value),style:C.value,class:w.value,isActive:g.value,controls:i,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:y=>f(d.proxy,l.value,y)},fe(t.props,["type","color","shrink"]),fe(e,["dot","badge","title","disabled","showZeroBadge"])),{title:n.title}),x=S(!g.value);return B(g,f=>{f?x.value=!1:rt(()=>{x.value=!0})}),B(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),ct(Mt,g),ie({id:i,renderTitle:v}),()=>{var f;const y=`${t.id}-${l.value}`,{animated:r,swipeable:k,scrollspy:m,lazyRender:N}=t.props;if(!n.default&&!r)return;const j=m||g.value;if(r||k)return b($t,{id:i,role:"tabpanel",class:J("panel-wrapper",{inactive:x.value}),tabindex:g.value?0:-1,"aria-hidden":!g.value,"aria-labelledby":y},{default:()=>{var z;return[b("div",{class:J("panel")},[(z=n.default)==null?void 0:z.call(n)])]}});const M=o.value||m||!N?(f=n.default)==null?void 0:f.call(n):null;return dt(b("div",{id:i,role:"tabpanel",class:J("panel"),tabindex:j?0:-1,"aria-labelledby":y},[M]),[[ft,j]])}}});const Gt=oe(Xt),Qt=oe(jt);const Jt=e=>(_t("data-v-60ba4786"),e=e(),xt(),e),ea={class:"zh-body"},ta=Jt(()=>he("div",{class:"zh_footer_tips"},[he("p",null,"⭐️ 点击图片即可预览,长按图片即可保存")],-1)),aa={key:1},na={__name:"index",setup(e){let n=S(0),i=S(!1);const o=ne([{title:"日常任务位置",api:"scrw",imagesData:""},{title:"季节蜡烛位置",api:"scjl",imagesData:""},{title:"大蜡烛位置",api:"scdl",imagesData:""}]),d=()=>{o[n.value].imagesData||t()},t=()=>{$(()=>{i.value=!0}),It({message:"生成中...",forbidClick:!0,duration:0});const u=o[n.value].api;kt(u).then(s=>{if(s&&s.type&&s.type.startsWith("image/")){const g=new FileReader;g.onloadend=function(){o[n.value].imagesData=g.result},g.readAsDataURL(s)}Rt(),i.value=!1})};t();const l=()=>{Pt([o[n.value].imagesData])};return(u,s)=>{const g=Gt,w=Qt,C=Bt,v=Ct,x=Dt,f=St,y=Tt;return H(),Q("div",ea,[ta,b(w,{active:V(n),"onUpdate:active":s[0]||(s[0]=r=>mt(n)?n.value=r:n=r),onChange:d,animated:"",swipeable:""},{default:Y(()=>[(H(!0),Q(gt,null,wt(o,(r,k)=>(H(),ve(g,{key:k,title:r.title,disabled:V(i)},null,8,["title","disabled"]))),128))]),_:1},8,["active"]),V(i)?(H(),ve(C,{key:0,vertical:""},{default:Y(()=>[yt("加载中...")]),_:1})):o[V(n)].imagesData?(H(),Q("div",aa,[b(v),b(y,{justify:"center"},{default:Y(()=>[b(f,{span:"22"},{default:Y(()=>[b(x,{src:o[V(n)].imagesData,onClick:l},null,8,["src"])]),_:1})]),_:1})])):bt("",!0)])}}},ua=ht(na,[["__scopeId","data-v-60ba4786"]]);export{ua as default};
